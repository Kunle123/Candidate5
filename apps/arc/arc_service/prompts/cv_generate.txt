**CV GENERATION - COMPLETE PROFILE ENUMERATION**

You are generating a complete CV using the candidate's profile accessed via get_candidate_profile function.

**üö® MANDATORY FIRST STEP - COUNT ALL ROLES:**
Before generating the CV, you MUST:
1. Call get_candidate_profile function
2. Count the TOTAL number of roles in work_experience array
3. Example: If profile has 17 roles, you MUST output exactly 17 role objects in the CV
4. **FAILURE CONDITION:** If CV has fewer roles than profile, the generation has FAILED

**CRITICAL RULES:**

1. **PROFILE ACCESS:** Call get_candidate_profile function FIRST, extract complete work_experience array
2. **MANDATORY ENUMERATION:** Output EXACTLY the same number of roles as in profile (if profile has 17, CV must have 17)
3. **ZERO OMISSIONS:** Every single role gets a separate entry - no combining, no filtering, no "selecting most relevant"
4. **AUTHENTIC BULLETS:** Use ONLY bullets from profile - no fabrication, no paraphrasing to create "variety"
5. **DE-DUPLICATION:** Remove exact/near-duplicate bullets within same role (keep most complete version)
6. **ACTUAL COUNTS:** If profile has 3 bullets for a role, output 3 (not 6-9). If it has 10, output all 10
7. **SMART ORDERING:** Top 2 bullets per role = most job-relevant with quantifiable impact
8. **PRIVACY:** Use "{{CANDIDATE_NAME}}" for name, "{{CONTACT_INFO}}" for contact, "{{CANDIDATE_LOCATION_FROM_PROFILE}}" for location

**CONTENT VOLUME & BULLET DISTRIBUTION:**

**TARGET:** Comprehensive CV (4+ pages of content). Completeness > page count (include ALL roles even if exceeds target).

**BULLET DISTRIBUTION BY RECENCY (USE ONLY AVAILABLE BULLETS):**
- **Roles 1-3 (Most Recent):** All bullets from profile, ordered by job relevance (typically 6-9 if available)
- **Roles 4-6:** All bullets from profile, ordered by job relevance (typically 5-7 if available)
- **Roles 7-10:** All bullets from profile, ordered by job relevance (typically 4-6 if available)
- **Roles 11-15:** All bullets from profile, ordered by job relevance (typically 3-5 if available)
- **Roles 16+:** All bullets from profile, ordered by job relevance (typically 2-3 if available)

**CRITICAL:** These are typical distributions based on what's ACTUALLY in the profile, NOT minimums to fabricate.
- If profile has 4 bullets for a role ‚Üí output exactly 4
- If profile has 10 bullets for a role ‚Üí output all 10
- More detail in recent roles, but NEVER omit older roles

**BULLET ORDERING:** Within each role, top 2 bullets MUST be most job-relevant with quantifiable impact

**ACHIEVEMENTS:** Scan ALL work experience bullets across ALL roles. Extract 5-10 quantifiable achievements most relevant to job. Include evidence_source (company/role where it occurred).

**SKILLS:** Derive from work experience and match to job requirements. Skills, education, and certifications are NOT in profile - skills derived from work descriptions, education/certs added automatically (don't include in your response).

**JSON STRUCTURE:**

```json
{
  "cv": {
    "personal_information": {
      "name": "{{CANDIDATE_NAME}}",
      "contact": "{{CONTACT_INFO}}",
      "professional_title": "Title from most recent role",
      "location": "{{CANDIDATE_LOCATION_FROM_PROFILE}}"
    },
    "professional_summary": {
      "content": "Comprehensive summary incorporating all major profile elements",
      "priority": 1
    },
    "professional_experience": {
      "roles": [
        {
          "company": "Exact company from profile",
          "title": "Exact title from profile",
          "start_date": "Exact start_date from profile",
          "end_date": "Exact end_date from profile",
          "location": "Exact location from profile (if available)",
        "bullets": [
          {
              "content": "Most job-relevant bullet from profile",
              "priority": 1,
              "relevance_score": 1
            },
            {
              "content": "Second most job-relevant bullet from profile",
            "priority": 1,
              "relevance_score": 2
            }
          ]
        }
      ]
    },
    "achievements": [
      {
        "content": "Quantifiable achievement extracted from work experience bullets",
        "priority": 1,
        "evidence_source": "Company - Role where this occurred"
      }
    ],
    "technical_skills": {
      "priority_1": ["Top technical skills derived from work experience and matched to job"],
      "priority_2": ["Important technical skills from work experience"],
      "priority_3": ["Additional technical skills from work experience"]
    },
    "soft_skills": {
      "priority_1": ["Top soft skills derived from work responsibilities"],
      "priority_2": ["Important soft skills from work experience"],
      "priority_3": ["Additional soft skills from achievements"]
    },
    "projects": [
      {
        "name": "Exact project name from profile",
        "description": "Exact description from profile",
        "priority": 1
      }
    ],
    "languages": ["All languages from profile if available"],
    "interests": ["All interests from profile if available"]
  },
  "cover_letter": {
    "content": "Comprehensive cover letter highlighting all major profile strengths"
  },
  "job_alignment": {
    "job_title": "Exact job title from description",
    "company_name": "Company from description (or 'Not specified')",
    "match_score": 85,
    "keywords_matched": ["All keywords from job matching profile content"]
  }
}
```

**üö® MANDATORY VALIDATION BEFORE RETURNING:**

**ROLE COUNT VERIFICATION (MOST CRITICAL):**
1. Count roles in profile work_experience array: X roles
2. Count roles in your CV professional_experience.roles array: Y roles
3. **REQUIREMENT:** X must equal Y
4. **If X ‚â† Y, you have FAILED the task. DO NOT return the response. Generate all missing roles.**

**Example:**
- Profile has 17 work experiences ‚Üí CV MUST have exactly 17 role objects
- Profile has 5 work experiences ‚Üí CV MUST have exactly 5 role objects
- **NO EXCEPTIONS** - older roles, less relevant roles, short-tenure roles ALL must be included

**OTHER VALIDATIONS:**
- ‚úì ALL unique bullets from profile included for each role (no omissions, no duplicates)
- ‚úì Top 2 bullets per role are most job-relevant
- ‚úì 5-10 achievements extracted from work experience bullets with evidence_source
- ‚úì Skills derived from work experience
- ‚úì Projects from profile included
- ‚úì Education/certifications NOT in response (added automatically)

**CRITICAL FAILURE CONDITIONS (DO NOT SUBMIT IF ANY OCCUR):**
- ‚ùå Role count mismatch (profile has 17, CV has only 5) ‚Üê **YOUR CURRENT ERROR**
- ‚ùå Omitting older roles because they seem "less relevant"
- ‚ùå Omitting roles to "fit" a page limit
- ‚ùå Combining multiple roles into one entry
- ‚ùå Fabricating bullets to reach target counts
- ‚ùå Including duplicate/near-duplicate bullets in same role

Return ONLY the JSON object. No markdown formatting, no explanatory text.
