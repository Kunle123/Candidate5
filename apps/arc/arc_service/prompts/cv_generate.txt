**ðŸš¨ðŸš¨ðŸš¨ FUNCTION-BASED CV GENERATION - PRIORITY & TOGGLE SYSTEM ðŸš¨ðŸš¨ðŸš¨**

**JSON OUTPUT ONLY:** Return ONLY the JSON object. No explanatory text, markdown, or code blocks.

**ðŸš¨ðŸš¨ðŸš¨ CRITICAL: PROFILE FUNCTION ACCESS REQUIREMENT ðŸš¨ðŸš¨ðŸš¨**
- You MUST have already called the get_candidate_profile function and received the candidate's actual profile data
- Use ONLY the information provided in the profile function response - never fabricate or assume details
- Every piece of information in the CV must be traceable to the candidate's actual profile data
- If specific information is not in the profile, do not include it or mark it as unavailable

**ðŸš¨ðŸš¨ðŸš¨ CRITICAL: ZERO FABRICATION POLICY ðŸš¨ðŸš¨ðŸš¨**
- NEVER invent, fabricate, or create any information not explicitly provided in the profile function response
- ONLY use data directly from the profile function and job description
- DO NOT enhance, embellish, or add details not in the profile function response
- WHEN IN DOUBT: Use exact wording from profile function response or omit the information

**ðŸš¨ðŸš¨ðŸš¨ MANDATORY PRIVACY PROTECTION ðŸš¨ðŸš¨ðŸš¨**
- **Name Field:** MUST use placeholder "{{CANDIDATE_NAME}}" - NEVER use actual names
- **Contact Info:** MUST use placeholder "{{CONTACT_INFO}}" - NEVER use actual contact details
- **Email/Phone/Address:** ALL contact information MUST be replaced with "{{CONTACT_INFO}}"
- This applies to ALL sections including summary, experience, and cover letter

**ðŸš¨ðŸš¨ðŸš¨ CV LENGTH & PRIORITY SYSTEM ðŸš¨ðŸš¨ðŸš¨**

**COMPREHENSIVE CV GENERATION FOR MULTIPLE LENGTHS:**
Generate ONE comprehensive CV with priority-based content that enables frontend to create:

**LONG CV (4+ pages):** All Priority 1-5 content, all sections enabled
**MEDIUM CV (3 pages):** Priority 1-3 content, core sections enabled  
**SHORT CV (2 pages):** Priority 1-2 content, essential sections only

**ALL CV VARIANTS MUST BE VIABLE STANDALONE DOCUMENTS**

**PRIORITY ASSIGNMENT RULES:**

**Priority 1 (CRITICAL - Must appear in ALL CV lengths):**
- Most recent role bullets with strongest job keyword matches from profile
- Core technical skills directly matching job requirements from profile
- Essential qualifications and certifications from profile
- Key achievements with quantifiable impact from profile
- Professional summary (always included)

**Priority 2 (HIGH - Appears in Medium & Long CVs):**
- Recent role bullets with good job alignment from profile
- Important technical and soft skills from profile
- Significant achievements from recent roles in profile
- Relevant education and certifications from profile
- Supporting experience bullets from profile

**Priority 3 (MEDIUM - Appears in Long CVs):**
- Mid-career role bullets with moderate relevance from profile
- Additional skills and competencies from profile
- Earlier career achievements from profile
- Supporting qualifications from profile
- Professional development from profile

**Priority 4 (LOW - Long CV supplementary content):**
- Earlier career roles for timeline completion from profile
- General skills and competencies from profile
- Additional certifications from profile
- Volunteer work and interests from profile

**Priority 5 (OPTIONAL - Long CV completeness):**
- Very early career details from profile
- Basic skills for completeness from profile
- References and additional information from profile

**ðŸš¨ðŸš¨ðŸš¨ SECTION TOGGLE SYSTEM ðŸš¨ðŸš¨ðŸš¨**

**TOGGLE-ABLE SECTIONS (Frontend Control):**
- **achievements_section:** Can be turned on/off independently
- **competencies_section:** Can be turned on/off independently  
- **education_section:** Can be turned on/off independently
- **certifications_section:** Can be turned on/off independently
- **projects_section:** Can be turned on/off independently
- **languages_section:** Can be turned on/off independently
- **interests_section:** Can be turned on/off independently

**NON-TOGGLE-ABLE SECTIONS (Always Present):**
- **personal_information:** Always included
- **professional_summary:** Always included
- **professional_experience:** Always included (core CV requirement)

**ðŸš¨ðŸš¨ðŸš¨ COMPREHENSIVE CONTENT REQUIREMENTS ðŸš¨ðŸš¨ðŸš¨**

**PROFESSIONAL SUMMARY (Always Priority 1):**
- 4-6 complete sentences (80-120 words)
- Lead with STRONGEST job keyword matches from profile function response
- Cover: total years experience + key skills + industry focus + value proposition from profile
- Must work standalone in Short CV and support longer versions

**PROFESSIONAL EXPERIENCE (Priority 1-5 bullets per role):**
- **INCLUDE ALL ROLES** from profile function response in chronological order
- **PRESERVE ALL DATES** exactly as provided in profile function response
- **MAINTAIN CAREER CONTINUITY** - no gaps where profile shows continuous work

**BULLET DISTRIBUTION PER ROLE:**
- **Most Recent Role:** 6-8 bullets (3 Priority 1, 2 Priority 2, 2-3 Priority 3)
- **Recent Roles:** 4-6 bullets (2 Priority 1, 2 Priority 2, 1-2 Priority 3)
- **Mid-Career Roles:** 3-4 bullets (1 Priority 2, 2 Priority 3, 1 Priority 4)
- **Earlier Roles:** 2-3 bullets (1-2 Priority 4, 1 Priority 5)

**ACHIEVEMENTS SECTION (Toggle-able, Priority 1-3):**
- 8-12 achievement bullets spanning complete career from profile
- Draw from ALL roles in profile function response
- **Priority 1:** Bullets with strongest job keyword alignment from profile
- **Priority 2:** Bullets with good relevance and quantifiable impact from profile
- **Priority 3:** Bullets for career breadth and progression from profile
- Each bullet 15-25 words minimum

**CORE COMPETENCIES SECTION (Toggle-able, Priority 1-4):**
- **Technical Skills:** Extract from profile function response
  - Priority 1: Skills directly matching job requirements
  - Priority 2: Related/transferable skills
  - Priority 3: Additional technical skills
  - Priority 4: Supporting technical skills
- **Soft Skills:** Extract from profile function response
  - Priority 1: Key soft skills for role
  - Priority 2: Supporting interpersonal skills
  - Priority 3: Additional professional skills

**EDUCATION SECTION (Toggle-able, Priority 1-3):**
- All degrees and qualifications from profile function response
- **Priority 1:** Core degree and job-relevant qualifications
- **Priority 2:** Additional degrees and professional qualifications
- **Priority 3:** Professional development and training

**CERTIFICATIONS SECTION (Toggle-able, Priority 1-3):**
- All certifications from profile function response
- **Priority 1:** Job-relevant and current certifications
- **Priority 2:** Industry-relevant certifications
- **Priority 3:** Additional professional certifications

**ðŸš¨ðŸš¨ðŸš¨ INTELLIGENT KEYWORD ALIGNMENT ðŸš¨ðŸš¨ðŸš¨**

**SMART KEYWORD SUBSTITUTION:**
When profile function response contains related/equivalent terms, substitute with job keywords for maximum alignment:

**SUBSTITUTION RULES:**
- ONLY substitute when profile contains equivalent/related technology or skill
- NEVER fabricate - must have evidence in profile function response
- Use format: "{{JOB_KEYWORD}} ({{PROFILE_TERM}})" when both are valid
- Prioritize job keywords in first 2-3 bullets of each role
- **MAINTAIN EXACT DATES AND CHRONOLOGY** during substitution

**ðŸš¨ðŸš¨ðŸš¨ JSON OUTPUT SCHEMA ðŸš¨ðŸš¨ðŸš¨**

```json
{
  "cv_variants": {
    "short_cv_pages": 2,
    "medium_cv_pages": 3,
    "long_cv_pages": "{{ESTIMATED_PAGES_FROM_CONTENT}}",
    "all_variants_viable": true
  },
  "cv": {
    "personal_information": {
      "name": "{{CANDIDATE_NAME}}",
      "contact": "{{CONTACT_INFO}}",
      "professional_title": "{{TITLE_DERIVED_FROM_PROFILE}}",
      "location": "{{CONTACT_INFO}}",
      "always_included": true,
      "toggle_able": false
    },
    "professional_summary": {
      "content": "{{SUMMARY_FROM_PROFILE_WITH_JOB_ALIGNMENT}}",
      "word_count": "{{ACTUAL_WORD_COUNT}}",
      "keywords_included": ["{{KEYWORDS_FROM_JOB_MATCHING_PROFILE}}"],
      "career_span_mentioned": "{{YEARS_FROM_PROFILE}}",
      "priority": 1,
      "always_included": true,
      "toggle_able": false,
      "evidence_source": "Profile function: {{SPECIFIC_SECTIONS_USED}}"
    },
    "professional_experience": {
      "always_included": true,
      "toggle_able": false,
      "total_roles": "{{COUNT_FROM_PROFILE}}",
      "career_continuity_maintained": true,
      "roles": [
        {
          "company": "{{COMPANY_FROM_PROFILE}}",
          "title": "{{TITLE_FROM_PROFILE}}", 
          "start_date": "{{START_DATE_FROM_PROFILE}}",
          "end_date": "{{END_DATE_FROM_PROFILE}}",
          "location": "{{LOCATION_FROM_PROFILE}}",
          "chronological_position": "{{POSITION_NUMBER}}",
          "bullets": [
            {
              "content": "{{RESPONSIBILITY_FROM_PROFILE_WITH_JOB_KEYWORDS}}",
              "keywords_used": ["{{JOB_KEYWORDS_MATCHING_PROFILE}}"],
              "priority": "{{1-5_BASED_ON_RELEVANCE}}",
              "word_count": "{{ACTUAL_COUNT}}",
              "appears_in_short_cv": "{{TRUE_IF_PRIORITY_1_OR_2}}",
              "appears_in_medium_cv": "{{TRUE_IF_PRIORITY_1_2_OR_3}}",
              "appears_in_long_cv": true,
              "evidence_source": "Profile function: {{SPECIFIC_LOCATION}}"
            }
          ],
          "total_bullets": "{{ACTUAL_COUNT}}",
          "priority_1_bullets": "{{COUNT}}",
          "priority_2_bullets": "{{COUNT}}",
          "priority_3_bullets": "{{COUNT}}"
        }
      ]
    },
    "achievements_section": {
      "toggle_able": true,
      "section_enabled": true,
      "total_achievements": "{{COUNT_FROM_PROFILE}}",
      "achievements": [
        {
          "content": "{{ACHIEVEMENT_FROM_PROFILE_WITH_JOB_ALIGNMENT}}",
          "priority": "{{1-3_BASED_ON_RELEVANCE}}",
          "career_period": "{{PERIOD_FROM_PROFILE}}",
          "keywords_used": ["{{JOB_KEYWORDS_MATCHING_PROFILE}}"],
          "appears_in_short_cv": "{{TRUE_IF_PRIORITY_1_OR_2}}",
          "appears_in_medium_cv": "{{TRUE_IF_PRIORITY_1_2_OR_3}}",
          "appears_in_long_cv": true,
          "evidence_source": "Profile function: {{SPECIFIC_LOCATION}}"
        }
      ],
      "priority_1_count": "{{COUNT}}",
      "priority_2_count": "{{COUNT}}",
      "priority_3_count": "{{COUNT}}"
    },
    "competencies_section": {
      "toggle_able": true,
      "section_enabled": true,
      "technical_skills": [
        {
          "skill": "{{SKILL_FROM_PROFILE_WITH_JOB_ALIGNMENT}}",
          "proficiency": "{{LEVEL_FROM_PROFILE}}",
          "years_experience": "{{YEARS_FROM_PROFILE}}",
          "priority": "{{1-4_BASED_ON_JOB_RELEVANCE}}",
          "appears_in_short_cv": "{{TRUE_IF_PRIORITY_1_OR_2}}",
          "appears_in_medium_cv": "{{TRUE_IF_PRIORITY_1_2_OR_3}}",
          "appears_in_long_cv": true,
          "evidence_source": "Profile function: {{SPECIFIC_LOCATION}}"
        }
      ],
      "soft_skills": [
        {
          "skill": "{{SOFT_SKILL_FROM_PROFILE}}",
          "priority": "{{1-3_BASED_ON_JOB_RELEVANCE}}",
          "appears_in_short_cv": "{{TRUE_IF_PRIORITY_1_OR_2}}",
          "appears_in_medium_cv": "{{TRUE_IF_PRIORITY_1_2_OR_3}}",
          "appears_in_long_cv": true,
          "evidence_source": "Profile function: {{SPECIFIC_LOCATION}}"
        }
      ],
      "total_technical_skills": "{{COUNT}}",
      "total_soft_skills": "{{COUNT}}"
    },
    "education_section": {
      "toggle_able": true,
      "section_enabled": "{{TRUE_IF_EDUCATION_IN_PROFILE}}",
      "education": [
        {
          "degree": "{{DEGREE_FROM_PROFILE}}",
          "institution": "{{INSTITUTION_FROM_PROFILE}}",
          "graduation_date": "{{DATE_FROM_PROFILE}}",
          "classification": "{{GRADE_FROM_PROFILE}}",
          "priority": "{{1-3_BASED_ON_JOB_RELEVANCE}}",
          "appears_in_short_cv": "{{TRUE_IF_PRIORITY_1_OR_2}}",
          "appears_in_medium_cv": "{{TRUE_IF_PRIORITY_1_2_OR_3}}",
          "appears_in_long_cv": true,
          "evidence_source": "Profile function: {{SPECIFIC_LOCATION}}"
        }
      ]
    },
    "certifications_section": {
      "toggle_able": true,
      "section_enabled": "{{TRUE_IF_CERTIFICATIONS_IN_PROFILE}}",
      "certifications": [
        {
          "name": "{{CERTIFICATION_FROM_PROFILE}}",
          "issuer": "{{ISSUER_FROM_PROFILE}}",
          "date": "{{DATE_FROM_PROFILE}}",
          "priority": "{{1-3_BASED_ON_JOB_RELEVANCE}}",
          "appears_in_short_cv": "{{TRUE_IF_PRIORITY_1_OR_2}}",
          "appears_in_medium_cv": "{{TRUE_IF_PRIORITY_1_2_OR_3}}",
          "appears_in_long_cv": true,
          "evidence_source": "Profile function: {{SPECIFIC_LOCATION}}"
        }
      ]
    },
    "projects_section": {
      "toggle_able": true,
      "section_enabled": "{{TRUE_IF_PROJECTS_IN_PROFILE}}",
      "projects": "{{PROJECTS_FROM_PROFILE_OR_EMPTY_ARRAY}}"
    },
    "languages_section": {
      "toggle_able": true,
      "section_enabled": "{{TRUE_IF_LANGUAGES_IN_PROFILE}}",
      "languages": "{{LANGUAGES_FROM_PROFILE_OR_EMPTY_ARRAY}}"
    },
    "interests_section": {
      "toggle_able": true,
      "section_enabled": "{{TRUE_IF_INTERESTS_IN_PROFILE}}",
      "interests": "{{INTERESTS_FROM_PROFILE_OR_EMPTY_ARRAY}}"
    }
  },
  "cover_letter": {
    "content": "{{COVER_LETTER_FROM_PROFILE_AND_JOB_DESCRIPTION}}",
    "word_count": "{{ACTUAL_COUNT}}",
    "keywords_included": ["{{JOB_KEYWORDS_MATCHING_PROFILE}}"],
    "career_highlights_mentioned": "{{COUNT}}",
    "priority": 1,
    "evidence_source": "Profile function: {{SECTIONS_USED}}"
  },
  "cv_length_control": {
    "short_cv_content": {
      "estimated_pages": 2,
      "priority_levels_included": [1, 2],
      "sections_included": ["{{SECTIONS_WITH_PRIORITY_1_2_CONTENT}}"],
      "total_bullets": "{{COUNT}}",
      "viable_standalone": true
    },
    "medium_cv_content": {
      "estimated_pages": 3,
      "priority_levels_included": [1, 2, 3],
      "sections_included": ["{{SECTIONS_WITH_PRIORITY_1_2_3_CONTENT}}"],
      "total_bullets": "{{COUNT}}",
      "viable_standalone": true
    },
    "long_cv_content": {
      "estimated_pages": "{{ACTUAL_ESTIMATE}}",
      "priority_levels_included": [1, 2, 3, 4, 5],
      "sections_included": ["all_enabled_sections"],
      "total_bullets": "{{COUNT}}",
      "viable_standalone": true
    }
  },
  "generation_metadata": {
    "profile_function_accessed": true,
    "profile_data_comprehensive": true,
    "career_continuity_maintained": true,
    "total_career_years": "{{YEARS_FROM_PROFILE}}",
    "roles_included": "{{COUNT_FROM_PROFILE}}",
    "fabrication_check": "ZERO - all content from profile function response",
    "keyword_alignment_score": "{{CALCULATED_PERCENTAGE}}",
    "priority_distribution": {
      "priority_1_content": "{{PERCENTAGE}}",
      "priority_2_content": "{{PERCENTAGE}}", 
      "priority_3_content": "{{PERCENTAGE}}",
      "priority_4_content": "{{PERCENTAGE}}",
      "priority_5_content": "{{PERCENTAGE}}"
    }
  },
  "job_alignment": {
    "job_title": "{{JOB_TITLE_FROM_DESCRIPTION}}",
    "company_name": "{{COMPANY_FROM_DESCRIPTION}}",
    "overall_match_percentage": "{{CALCULATED_SCORE}}",
    "keyword_matches": "{{COUNT}}",
    "keyword_substitutions": "{{COUNT}}"
  }
}
```

**ðŸš¨ðŸš¨ðŸš¨ VALIDATION CHECKLIST ðŸš¨ðŸš¨ðŸš¨**

Before finalizing, verify:
- âœ“ SHORT CV (Priority 1-2): Professional, complete, viable standalone document
- âœ“ MEDIUM CV (Priority 1-3): Comprehensive, well-rounded, competitive document  
- âœ“ LONG CV (Priority 1-5): Detailed, complete career story, comprehensive document
- âœ“ ALL sections can be toggled on/off without breaking CV structure
- âœ“ Each priority level adds meaningful content from profile, not filler
- âœ“ Career continuity maintained across all CV lengths
- âœ“ All content traceable to profile function response
- âœ“ No fabrication in any priority level
- âœ“ All placeholders replaced with actual data from profile function

Return ONLY the JSON object. No explanatory text, no markdown formatting, no additional commentary.
