Adjust the CV length based on the user request: "{update_request}" (e.g., "make it shorter", "2-page version", "comprehensive long CV")

Current CV: {current_cv}
Original Profile: {original_profile}
Target Length: {target_length} (short/medium/long/extended_long)

**PRIORITY-BASED LENGTH CONTROL RULES:**

**SHORT CV (1-2 pages) - Priority 1 Only:** Include only Priority 1 content with maximum 2-3 bullets per role, recent 3-4 roles only, and top 3-4 achievements.

**MEDIUM CV (2-3 pages) - Priority 1-2:** Include Priority 1 and 2 content with maximum 3-4 bullets per role, recent 5-6 roles, and top 5-6 achievements.

**LONG CV (3-4 pages) - Priority 1-3:** Include Priority 1, 2, and 3 content with maximum 4-5 bullets per role, all relevant roles, and top 6-8 achievements.

**EXTENDED LONG CV (4+ pages) - Priority 1-5:** Include all priority levels with maximum 5-6 bullets per role, complete career timeline, and top 8-10 achievements.

**LENGTH ADJUSTMENT PROCESS:**

When shortening, remove lowest priority content first (Priority 5, then 4, then 3) while reducing bullets per role according to target length. When expanding, add higher priority content first while expanding bullets per role with additional detail from the original profile.

**CONTENT PRESERVATION RULES:**
- NEVER remove Priority 1 content regardless of length target
- Maintain chronological order and factual accuracy
- Preserve keyword optimization throughout
- Ensure UK English spelling and grammar

### OUTPUT FORMAT

Respond ONLY with a valid JSON object matching this exact schema:

```json
{
  "cv": {
    "name": "Full Name",
    "contact": {
      "email": "email@domain.com",
      "mobile": "+44 XXXX XXXXXX",
      "location": "City, UK",
      "linkedin": "linkedin.com/in/profile"
    },
    "professional_summary": {
      "content": "2-5 lines based on target CV length",
      "keywords_included": ["keyword1", "keyword2"],
      "priority_level": 1
    },
    "key_achievements": [
      {
        "content": "Achievement with quantified results",
        "priority": 1,
        "source_chunk": "recent_roles",
        "evidence_source": "Original profile location",
        "keywords_used": ["keyword1", "keyword2"]
      }
    ],
    "professional_experience": [
      {
        "company": "Company Name",
        "title": "Job Title",
        "dates": "Jan 2020 - Present",
        "location": "City, UK",
        "bullets": [
          {
            "content": "Achievement or responsibility",
            "priority": 1,
            "keywords_used": ["keyword1"],
            "evidence_source": "Original profile reference"
          }
        ]
      }
    ],
    "core_competencies": {
      "technical_skills": [
        {
          "skill": "Skill Name",
          "proficiency": "Expert/Advanced/Intermediate",
          "priority": 1,
          "evidence_source": "Profile reference"
        }
      ],
      "functional_skills": [
        {
          "skill": "Skill Name",
          "proficiency": "Advanced",
          "priority": 2
        }
      ]
    },
    "education": [
      {
        "degree": "Degree Name",
        "institution": "University Name",
        "year": "2015",
        "classification": "First Class Honours",
        "relevant_modules": ["Module 1", "Module 2"]
      }
    ],
    "certifications": [
      {
        "name": "Certification Name",
        "issuer": "Issuing Organisation",
        "year": "2023",
        "status": "Active/Expired"
      }
    ]
  },
  "cover_letter": {
    "content": "Four-paragraph cover letter following mandatory structure",
    "word_count": 180,
    "paragraph_breakdown": {
      "opening": "Paragraph 1 content",
      "achievements": "Paragraph 2 content", 
      "alignment": "Paragraph 3 content",
      "closing": "Paragraph 4 content"
    },
    "keywords_naturally_included": ["keyword1", "keyword2"],
    "job_alignment_score": 87
  },
  "reconstruction_metadata": {
    "chunks_processed": 3,
    "total_content_items": 45,
    "priority_distribution": {
      "priority_1_items": 8,
      "priority_2_items": 12,
      "priority_3_items": 15,
      "priority_4_items": 7,
      "priority_5_items": 3
    },
    "duplicates_removed": 3,
    "keywords_optimized": 16,
    "uk_english_validated": true,
    "json_schema_validated": true,
    "anti_fabrication_compliance": "100% - all content traced to original profile"
  },
  "job_title": "Extracted from job description",
  "company_name": "Extracted from job description"
}
```
